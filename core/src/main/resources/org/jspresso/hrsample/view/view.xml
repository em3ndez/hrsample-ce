<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
                      http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"
  default-lazy-init="true">

  <!--
    The views.
  -->
  <bean id="Traceable.pane" parent="decoratedView" class="org.jspresso.framework.view.descriptor.basic.BasicComponentViewDescriptor">
    <property name="labelsPosition" value="ABOVE" />
    <property name="columnCount" value="2" />
    <property name="modelDescriptor" ref="Traceable" />
    <property name="renderedProperties">
      <list>
        <value>createTimestamp</value>
        <value>lastUpdateTimestamp</value>
      </list>
    </property>
    <property name="description" value="traceable.editing">
    </property>
  </bean>

  <bean id="Company.pane" parent="decoratedView" class="org.jspresso.framework.view.descriptor.basic.BasicComponentViewDescriptor">
    <property name="labelsPosition" value="ASIDE" />
    <property name="columnCount" value="2" />
    <property name="modelDescriptor" ref="Company" />
    <property name="renderedProperties">
      <list>
        <value>name</value>
        <value>contact.address</value>
        <value>contact.city</value>
        <value>contact.phone</value>
        <value>contact.email</value>
      </list>
    </property>
    <property name="propertyWidths">
      <map>
        <entry key="name" value="2" />
      </map>
    </property>
    <property name="description" value="company.editing">
    </property>
  </bean>

  <bean id="Department-teams.subtree" class="org.jspresso.framework.view.descriptor.basic.BasicSimpleTreeLevelDescriptor">
    <property name="nodeGroupDescriptor">
      <bean class="org.jspresso.framework.view.descriptor.basic.BasicListViewDescriptor">
        <property name="modelDescriptor" ref="Department-teams" />
        <property name="actionMap" ref="masterDetailActionMap" />
        <property name="renderedProperty" value="ouId" />
      </bean>
    </property>
  </bean>

  <bean id="Company-departments.subtree" class="org.jspresso.framework.view.descriptor.basic.BasicSimpleTreeLevelDescriptor">
    <property name="nodeGroupDescriptor">
      <bean class="org.jspresso.framework.view.descriptor.basic.BasicListViewDescriptor">
        <property name="modelDescriptor" ref="Company-departments" />
        <property name="actionMap" ref="masterDetailActionMap" />
        <property name="renderedProperty" value="ouId" />
      </bean>
    </property>
    <property name="childDescriptor">
      <ref local="Department-teams.subtree" />
    </property>
  </bean>

  <bean id="Company.tree" class="org.jspresso.framework.view.descriptor.basic.BasicTreeViewDescriptor">
    <property name="modelDescriptor" ref="Company" />
    <property name="renderedProperty" value="name" />
    <property name="childDescriptor" ref="Company-departments.subtree" />
    <property name="iconImageURL" value="classpath:org/jspresso/hrsample/images/structure-48x48.png" />
  </bean>

  <bean id="Company.tab.pane" class="org.jspresso.framework.view.descriptor.basic.BasicTabViewDescriptor">
    <property name="modelDescriptor" ref="Company" />
    <property name="tabs">
      <list>
        <ref local="Company.pane" />
        <ref local="Company.tree" />
        <ref local="Traceable.pane" />
      </list>
    </property>
  </bean>

  <bean id="Company-departments.table" parent="decoratedView"
    class="org.jspresso.framework.view.descriptor.basic.BasicTableViewDescriptor">
    <property name="modelDescriptor" ref="Company-departments" />
    <property name="actionMap" ref="masterDetailActionMap" />
  </bean>

  <bean id="Department-teams.table" parent="decoratedView" class="org.jspresso.framework.view.descriptor.basic.BasicTableViewDescriptor">
    <property name="modelDescriptor" ref="Department-teams" />
    <property name="actionMap" ref="masterDetailActionMap" />
    <property name="renderedProperties">
      <list>
        <value>ouId</value>
        <value>name</value>
        <value>manager</value>
        <!--<value>manager.contact.city</value>-->
      </list>
    </property>
    <!--
    <property name="columnViewDescriptors">
      <list>
        <bean class="org.jspresso.framework.view.descriptor.basic.BasicPropertyViewDescriptor">
          <property name="name" value="ouId" />
          <property name="readOnly" value="true" />
        </bean>
        <bean class="org.jspresso.framework.view.descriptor.basic.BasicPropertyViewDescriptor">
          <property name="name" value="name" />
          <property name="readOnly" value="true" />
        </bean>
        <bean class="org.jspresso.framework.view.descriptor.basic.BasicPropertyViewDescriptor">
          <property name="name" value="contact" />
          <property name="readOnly" value="true" />
        </bean>
      </list>
    </property>
    -->
  </bean>

  <bean id="Team-teamMembers.table" parent="decoratedView" class="org.jspresso.framework.view.descriptor.basic.BasicTableViewDescriptor">
    <property name="modelDescriptor" ref="Team-teamMembers" />
    <property name="actionMap">
      <bean class="org.jspresso.framework.view.action.ActionMap">
        <property name="actionLists">
          <list>
            <bean class="org.jspresso.framework.view.action.ActionList">
              <property name="name" value="EDIT" />
              <property name="actions">
                <list>
                  <bean parent="lovAction">
                    <property name="autoquery" value="false" />
                    <property name="entityDescriptor" ref="Employee" />
                    <property name="initializationMapping">
                      <map>
                        <entry key="company" value="company" />
                      </map>
                    </property>
                    <property name="okAction">
                      <bean parent="lovOkFrontAction">
                        <property name="nextAction">
                          <bean class="org.jspresso.framework.application.backend.action.AddAnyCollectionToMasterAction" />
                        </property>
                      </bean>
                    </property>
                  </bean>
                  <ref bean="removeAnyCollectionFromMasterFrontAction" />
<!--
                  <bean
                    parent="abstractCollectionAction">
                    <property
                      name="name"
                      value="action.name" />
                    <property
                      name="description"
                      value="action.description" />
                    <property
                      name="iconImageURL"
                      value="classpath:org/jspresso/framework/application/images/view-48x48.png" />
                    <property
                      name="nextAction">
                      <bean
                        parent="editComponentAction">
                        <property name="viewDescriptor">
                          <bean parent="decoratedView" class="org.jspresso.framework.view.descriptor.basic.BasicSplitViewDescriptor">
                            <property name="leftTopViewDescriptor" ref="Employee.pane" />
                            <property name="rightBottomViewDescriptor" ref="Employee-events.table" />
                            <property name="modelDescriptor" ref="Employee"/>
                          </bean>
                        </property>
                      </bean>
                    </property>
                  </bean>
-->
                </list>
              </property>
            </bean>
          </list>
        </property>
      </bean>
    </property>
  </bean>

  <bean id="Departments.and.teams.view" class="org.jspresso.framework.view.descriptor.basic.BasicSplitViewDescriptor">
    <property name="leftTopViewDescriptor" ref="Company-departments.table" />
    <property name="rightBottomViewDescriptor">
      <bean class="org.jspresso.framework.view.descriptor.basic.BasicSplitViewDescriptor">
        <property name="orientation" value="HORIZONTAL" />
        <property name="leftTopViewDescriptor" ref="Department-teams.table" />
        <property name="rightBottomViewDescriptor" ref="Team-teamMembers.table" />
        <property name="cascadingModels" value="true" />
      </bean>
    </property>
    <property name="cascadingModels" value="true" />
  </bean>

  <bean id="Company.organization.view" class="org.jspresso.framework.view.descriptor.basic.BasicSplitViewDescriptor">
    <property name="modelDescriptor" ref="Company" />
    <property name="leftTopViewDescriptor" ref="Company.tab.pane" />
    <property name="rightBottomViewDescriptor" ref="Departments.and.teams.view" />
  </bean>

  <bean id="Employee.photo.pane" parent="decoratedView" class="org.jspresso.framework.view.descriptor.basic.BasicImageViewDescriptor">
    <property name="modelDescriptor" ref="Employee-photo"/>
    <property
      name="actionMap"
      ref="binaryPropertyActionMap" />
  </bean>
  <bean id="Employee.component.pane" class="org.jspresso.framework.view.descriptor.basic.BasicComponentViewDescriptor">
    <property name="columnCount" value="3" />
  </bean>

  <bean id="Employee.pane" parent="decoratedView" class="org.jspresso.framework.view.descriptor.basic.BasicSplitViewDescriptor">
    <property name="modelDescriptor" ref="Employee" />
    <property name="orientation" value="HORIZONTAL"/>
    <property name="leftTopViewDescriptor" ref="Employee.component.pane" />
    <property name="rightBottomViewDescriptor" ref="Employee.photo.pane" />
  </bean>

  <bean id="Employee-events.table" parent="decoratedView" class="org.jspresso.framework.view.descriptor.basic.BasicTableViewDescriptor">
    <property name="modelDescriptor" ref="Employee-events" />
    <property name="actionMap" ref="masterDetailActionMap" />
  </bean>

  <bean id="Event.text.pane" parent="decoratedView" class="org.jspresso.framework.view.descriptor.basic.BasicPropertyViewDescriptor">
    <property name="name" value="text" />
    <property name="modelDescriptor" ref="Event.text" />
    <property name="actionMap" ref="binaryPropertyActionMap" />
  </bean>

  <!--
    Customized module views
  -->
  <bean id="City.module.view" parent="decoratedView" class="org.jspresso.framework.view.descriptor.basic.BasicComponentViewDescriptor">
    <property name="columnCount" value="1" />
    <property name="actionMap">
      <bean class="org.jspresso.framework.view.action.ActionMap">
        <property name="actionLists">
          <list>
            <bean class="org.jspresso.framework.view.action.ActionList">
              <property name="name" value="FILE" />
              <property name="actions">
                <list>
                  <ref bean="saveModuleObjectFrontAction" />
                  <ref bean="reloadModuleObjectFrontAction" />
                </list>
              </property>
            </bean>
          </list>
        </property>
      </bean>
    </property>
  </bean>

  <bean id="Employee.module.view" parent="decoratedView" class="org.jspresso.framework.view.descriptor.basic.BasicSplitViewDescriptor">
    <property name="leftTopViewDescriptor" ref="Employee.pane" />
    <property name="rightBottomViewDescriptor">
      <bean class="org.jspresso.framework.view.descriptor.basic.BasicSplitViewDescriptor">
        <property name="orientation" value="HORIZONTAL" />
        <property name="cascadingModels" value="true" />
        <property name="leftTopViewDescriptor" ref="Employee-events.table" />
        <property name="rightBottomViewDescriptor" ref="Event.text.pane" />
      </bean>
    </property>
    <property name="actionMap">
      <bean class="org.jspresso.framework.view.action.ActionMap">
        <property name="actionLists">
          <list>
            <bean class="org.jspresso.framework.view.action.ActionList">
              <property name="name" value="FILE" />
              <property name="actions">
                <list>
                  <ref bean="saveModuleObjectFrontAction" />
                  <ref bean="reloadModuleObjectFrontAction" />
                </list>
              </property>
            </bean>
          </list>
        </property>
      </bean>
    </property>
  </bean>

  <bean id="Company.module.view" parent="Company.organization.view">
    <property name="actionMap">
      <bean class="org.jspresso.framework.view.action.ActionMap">
        <property name="actionLists">
          <list>
            <bean class="org.jspresso.framework.view.action.ActionList">
              <property name="name" value="FILE" />
              <property name="actions">
                <list>
                  <ref bean="saveModuleObjectFrontAction" />
                  <ref bean="reloadModuleObjectFrontAction" />
                </list>
              </property>
            </bean>
          </list>
        </property>
      </bean>
    </property>
  </bean>

  <!--
    The application I18N resources. 
  -->
  <bean id="applicationMessageSource" parent="abstractApplicationMessageSource">
    <property name="parentMessageSource" ref="commonsMessageSource" />
    <property name="basenames">
      <list>
        <value>org.jspresso.hrsample.i18n.Messages</value>
      </list>
    </property>
  </bean>

  <bean id="testView" parent="Company.organization.view" />

</beans>